{
  "初始化": {
    "检查Java环境": {
      "Type": "COMMAND_STDOUT",
      "Script": {
        "输出Java版本": "java -version 2>&1"
      }
    },
    "检查Maven环境": {
      "Type": "COMMAND_STDOUT",
      "Script": {
        "输出Maven版本": "mvn -v"
      }
    },
    "绑定构建参数": {
      "Type": "BUILD_PARAMETER_DROP_DOWN_MENU",
      "StepsName": "部署",
      "ParamName": "deploy-choice"
    }
  },
  "编译构建": {
    "执行Maven构建": {
      "Type": "COMMAND_STATUS",
      "Script": {
        "Maven构建": "cd ${PROJECT_PATH};mvn clean package -U -DskipTests"
      }
    }
  },
  "部署": {
    "部署服务器": {
      "Type": "COMMAND_STATUS",
      "Script": {
        "推送镜像": "cd ${PROJECT_PATH};docker build -f build-script/Dockerfile -t yuanshuai1122/omoms-server:1.0.0 .;docker push yuanshuai1122/omoms-server:1.0.0;docker rmi yuanshuai1122/omoms-server:1.0.0",
        "部署镜像": "docker pull yuanshuai1122/omoms-server:1.0.0;docker run -d -p 8081:8081 --name omoms-server yuanshuai1122/omoms-server:1.0.0;"
      }
    }
  }
}